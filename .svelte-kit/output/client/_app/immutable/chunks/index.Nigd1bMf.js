import{s as _}from"./runtime.cCYf5DrJ.js";const f=[];function l(){}function m(e,t){return{subscribe:v(e,t).subscribe}}function q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function v(e,t=l){let r=null;const o=new Set;function i(s){if(q(e,s)&&(e=s,r)){const u=!f.length;for(const n of o)n[1](),f.push(n,e);if(u){for(let n=0;n<f.length;n+=2)f[n][0](f[n+1]);f.length=0}}}function a(s){i(s(e))}function b(s,u=l){const n=[s,u];return o.add(n),o.size===1&&(r=t(i,a)||l),s(e),()=>{o.delete(n),o.size===0&&r&&(r(),r=null)}}return{set:i,update:a,subscribe:b}}function x(e){return e()}function z(e){e.forEach(x)}function E(e,t,r){const o=!Array.isArray(e),i=o?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return m(r,(b,s)=>{let u=!1;const n=[];let p=0,d=l;const g=()=>{if(p)return;d();const c=t(o?n[0]:n,b,s);a?b(c):d=typeof c=="function"?c:l},h=i.map((c,y)=>_(c,w=>{n[y]=w,p&=~(1<<y),u&&g()},()=>{p|=1<<y}));return u=!0,g(),function(){z(h),d(),u=!1}})}function j(e){return{subscribe:e.subscribe.bind(e)}}function B(e){let t;return _(e,r=>t=r)(),t}export{j as a,E as d,B as g,m as r,v as w};
